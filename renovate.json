{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": [
        "config:recommended"
    ],
    "automerge": true,
    "automergeType": "pr",
    "automergeStrategy": "squash",
    "separateMajorMinor": false,
    "dependencyDashboard": true,
    "customManagers": [
        {
          "customType": "regex",
          "fileMatch": [
            "(^|/|\\.)(CMakeLists.txt)$"
          ],
          "matchStrings": [
            "\\S*GIT_TAG=\"(?<currentValue>.*)\" # renovate: datasource=(?<datasource>.*?) depName=(?<depName>.*?)( allowedVersions=(?<allowedVersions>.*?))?( versioning=(?<versioning>.*?))?"
          ],
          "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}",
            "datasourceTemplate": "github-tags"
        },
        {
            "customType": "regex",
            "fileMatch": ["(^|/|\\.)Earthfile$"],
            "matchStrings": ["VERSION (?<currentValue>.*?)\\n"],
            "datasourceTemplate": "github-tags",
            "depNameTemplate": "earthly/earthly",
            "versioningTemplate": "regex:^v(?<major>\\d+)\\.(?<minor>\\d+)$"
        },
        {
            "customType": "regex",
            "fileMatch": ["(^|/|\\.)Earthfile$"],
            "matchStringsStrategy": "any",
            "matchStrings": [
              "FROM (?<depName>\\S*):(?<currentValue>\\S*)"
            ],
            "datasourceTemplate": "docker"
        },
        {
            "customType": "regex",
            "fileMatch": ["(^|/|\\.)ci.yml$"],
            "matchStrings": [
                ".*_VERSION:*.(?<currentValue>)\\s*#\\s*renovate: datasource=(?<datasource>.*?) depName=(?<depName>.*?)( versioning=(?<versioning>.*?))?( allowedVersions=(?<allowedVersions>.*?))?\\s*"
            ],
            "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}",
            "datasourceTemplate": "github-tags"
        }
      ]
}