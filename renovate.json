{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": [
        "config:recommended"
    ],
    "automerge": true,
    "automergeType": "pr",
    "automergeStrategy": "squash",
    "separateMajorMinor": false,
    "dependencyDashboard": true,
    "customManagers": [
        {
          "customType": "regex",
          "fileMatch": [
            "(^|/|\\.)(CMakeLists.txt)file$"
          ],
          "matchStrings": [
            "# renovate: datasource=(?<datasource>.*?) depName=(?<depName>.*?) (allowedVersions=(?<allowedVersions>.*?))? (versioning=(?<versioning>.*?))?\\sGIT_TAG=(?<currentValue>.*)\\s"
          ]
        },
        {
            "customType": "regex",
            "fileMatch": ["^Eartfile$"],
            "matchStrings": ["VERSION (?<currentValue>.*?)\\n"],
            "datasourceTemplate": "github-tags",
            "depNameTemplate": "earthly/earthly",
            "versioningTemplate": "regex:^v(?<major>\\d+)\\.(?<minor>\\d+)$"
        },
        {
            "customType": "regex",
            "fileMatch": ["^Eartfile$"],
            "matchStringsStrategy": "any",
            "matchStrings": [
              "FROM (?<depName>\\S*):(?<currentValue>\\S*)"
            ],
            "datasourceTemplate": "docker"
        },
        {
            "customType": "regex",
            "fileMatch": ["^ci.yml$"],
            "matchStrings": [
               "# renovate: datasource=(?<datasource>.*?) depName=(?<depName>.*?)\\s.*?_VERSION:(?<currentValue>.*)\\s"
            ]
        }
      ]
}